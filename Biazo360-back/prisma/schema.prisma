generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model encomendas {
  codigo_rastreio    String               @id @db.VarChar(30)
  id_salesforce      String               @unique(map: "id_salesforce") @db.VarChar(18)
  nome_remetente     String?              @db.VarChar(255)
  tel_remetente      String?              @db.VarChar(25)
  email_remetente    String?              @db.VarChar(255)
  nome_destinatario  String?              @db.VarChar(255)
  tel_destinatario   String?              @db.VarChar(25)
  email_destinatario String?              @db.VarChar(255)
  status             String?              @db.VarChar(100)
  data_postagem      DateTime?            @db.DateTime(0)
  previsao_entrega   DateTime?            @db.Date
  ultima_atualizacao DateTime?            @db.DateTime(0)
  created_at         DateTime?            @default(now()) @db.Timestamp(0)
  updated_at         DateTime?            @default(now()) @db.Timestamp(0)
  historico_rastreio historico_rastreio[]
}

model historico_rastreio {
  id                        Int        @id @default(autoincrement())
  encomenda_codigo_rastreio String     @db.VarChar(30)
  id_salesforce             String     @unique(map: "id_salesforce") @db.VarChar(18)
  data_evento               DateTime   @db.DateTime(0)
  localizacao               String?    @db.VarChar(255)
  descricao                 String     @db.Text
  created_at                DateTime?  @default(now()) @db.Timestamp(0)
  status                    String?    @db.VarChar(30)
  encomendas                encomendas @relation(fields: [encomenda_codigo_rastreio], references: [codigo_rastreio], onDelete: Cascade, onUpdate: NoAction, map: "historico_rastreio_ibfk_1")

  @@index([encomenda_codigo_rastreio], map: "idx_encomenda_codigo")
}
